<!DOCTYPE html>
<html lang="en">

<head>
  <title>service-turtle</title>
</head>

<body>
  <h1>service-turtle</h1>
  <p>Browse to this page from a local webserver, for example using http-server. Open browser console to see the
  results</p>
  <div>
    <button id="fetch">Fetch something</button> using GET to <code>/some/url</code>
    <p>You can mock the response using <code>turtle.get('/some/url', { code: 200, data: 'hi there' });</code> and then
    click the button again.</p>
  </div>

  <script>
    function fetch(url) {
      var request = new XMLHttpRequest();
      request.open('GET', url, true);

      request.onload = function() {
        if (request.status >= 200 && request.status < 400){
          console.log('response from', url, request.status, request.responseText);
        } else {
          // We reached our target server, but it returned an error
          console.error('some error', url, request.responseText);
        }
      };

      request.onerror = function() {
        // There was a connection error of some sort
        console.error('error', url, request.responseText);
      };

      request.send();
    }

    function onButtonClick() {
      console.log('button clicked');
      fetch('/some/url');
    }

    document.addEventListener('DOMContentLoaded', function() {
      document.querySelector('#fetch').addEventListener('click', onButtonClick);
    });
  </script>
  <script src="turtle.js"></script>
  <script src="foo.js"></script>
</body>
</html>
